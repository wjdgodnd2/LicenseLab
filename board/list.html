<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- head 부분 생략 -->
</head>
<body>
  <header data-include="/LicenseLab/include/header.html"></header>
  <div class="lgbody">
    <main id="main-holder">
      <div class="board_wrap">
        <div class="board_title">
          <strong>게시판</strong>
          <p>게시판을 빠르고 정확하게 안내해드립니다.</p>
        </div>
        <div class="board_list_wrap">
          <div class="board_list" id="postList">
            <!-- 여기에 동적으로 게시글이 추가될 것입니다. -->
          </div>
          <!-- 페이지네이션 등의 UI 요소도 추가 가능 -->
          <div class="board_page">
            <a href="#" class="bt first"><<</a>
            <a href="#" class="bt prev"><</a>
            <a href="#" class="num on">1</a>
            <a href="#" class="num">2</a>
            <a href="#" class="num">3</a>
            <a href="#" class="num">4</a>
            <a href="#" class="num">5</a>
            <a href="#" class="bt next">></a>
            <a href="#" class="bt last">>></a>
          </div>
          <div class="bt_wrap">
            <a href="write.html" class="on">등록</a>
          </div>
        </div>
      </div>
    </main>
  </div>
  <footer data-include="/LicenseLab/include/footer.html"></footer>

  <script type="module">
    document.addEventListener('DOMContentLoaded', function () {
        fetch('http://localhost:3000/api/posts')
            .then(response => response.json())
            .then(posts => {
                const postListContainer = document.getElementById('postList');

                posts.forEach(post => {
                    const postElement = document.createElement('div');
                    postElement.innerHTML = `
                      <div class="board_item">
                        <div class="num">${post.id}</div>
                        <div class="title"><a href="#" onclick="openModifyDeletePage('${post.id}')">${post.title}</a></div>
                        <div class="writer">${post.writer}</div>
                        <div class="date">${post.created_at}</div>
                        <div class="count">${post.views}</div>
                      </div>
                    `;

                    postListContainer.appendChild(postElement);
                });
            })
            .catch(error => {
                console.error('게시글 목록을 가져오는 데 실패했습니다.', error);
            });
    });

    function openModifyDeletePage(postId) {
        console.log('openModifyDeletePage 함수 호출:', postId);
        // 게시물 ID를 URL 파라미터에 추가하여 modify-delete.html로 이동
        window.location.href = `modify-delete.html?postId=${postId}`;
    }
  </script>
</body>
</html>
